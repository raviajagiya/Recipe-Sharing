{% extends "base.html" %}

{% block title %}Home - Recipe App{% endblock %}

{% block content %}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Recipe Feed</h2>
        {% if current_user.is_authenticated %}
            <a href="{{ url_for('recipe.submit_recipe') }}" class="btn btn-primary">Submit Recipe</a>
        {% endif %}
    </div>

    <form method="get" class="row g-3 mb-4">
        <div class="col-md-3">
            <input type="text" name="search" class="form-control" placeholder="Search by title..." value="{{ request.args.get('search', '') }}">
        </div>
        <div class="col-md-2">
            <select name="time_of_eat" class="form-select">
                <option value="">Time of Eat</option>
                <option value="Breakfast" {% if selected_time == 'Breakfast' %}selected{% endif %}>Breakfast</option>
                <option value="Lunch" {% if selected_time == 'Lunch' %}selected{% endif %}>Lunch</option>
                <option value="Dinner" {% if selected_time == 'Dinner' %}selected{% endif %}>Dinner</option>
            </select>
        </div>
        <div class="col-md-2">
            <select name="type_of_dish" class="form-select">
                <option value="">Type of Dish</option>
                <option value="Indian" {% if selected_dish == 'Indian' %}selected{% endif %}>Indian</option>
                <option value="Mexican" {% if selected_dish == 'Mexican' %}selected{% endif %}>Mexican</option>
                <option value="Spanish" {% if selected_dish == 'Spanish' %}selected{% endif %}>Spanish</option>
                <!-- Add more as needed -->
            </select>
        </div>
        <div class="col-md-2">
            <select name="language" class="form-select">
                <option value="">Language</option>
                <option value="English" {% if selected_lang == 'English' %}selected{% endif %}>English</option>
                <option value="Hindi" {% if selected_lang == 'Hindi' %}selected{% endif %}>Hindi</option>
                <!-- Add more as needed -->
            </select>
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-outline-success w-100">Search</button>
        </div>
    </form>

    {% if recipes %}
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            {% for recipe in recipes %}
                <div class="col">
                    <div class="card h-100">
                        <!--{% if recipe.image %}
                            <img src="{{ url_for('static', filename=recipe.image.replace('static/', '')) }}" class="card-img-top" alt="{{ recipe.title }}">
                        {% endif %}-->
                        {% if recipe.image %}
                            <img src="{{ url_for('static', filename=recipe.image) }}" alt="{{ recipe.title }}" style="max-width: 100%; height: auto;">
                        {% endif %}

                        <div class="card-body">
                            <h5 class="card-title">{{ recipe.title }}</h5>
                            <p class="card-text">{{ recipe.description[:100] }}...</p>
                            <p class="text-muted mb-0">
                                <strong>{{ recipe.time_of_eat }}</strong> | {{ recipe.type_of_dish }} | {{ recipe.language }}
                            </p>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>No recipes found.</p>
    {% endif %}
{% endblock %}
